<!DOCTYPE html>
<html lang="en">
<head>
  <!-- head.html — copy everything below into each page's <head> -->
<meta charset="UTF-8">
<title>%%PAGE_TITLE%%</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="%%PAGE_DESCRIPTION%%">
<link rel="stylesheet" href="style.css">

<!-- Global app/api overrides (must load BEFORE any CTA or fetch wiring) -->
<script>
  window.CAIO_APP_BASE = "https://caio-frontend.vercel.app";
  // window.CAIO_API_BASE = "https://api.caio.live"; // uncomment if needed
</script>

<!-- Social cards -->
<meta property="og:title" content="%%OG_TITLE%%">
<meta property="og:description" content="%%OG_DESCRIPTION%%">
<meta property="og:type" content="website">
<meta property="og:image" content="assets/og-card.png">
<meta name="twitter:card" content="summary_large_image">

<!-- Favicon (optional) -->
<!-- <link rel="icon" type="image/png" href="favicon.png"> -->
</head>
<body>
  <div class="container">
    <h1 style="text-align:center;">CAIO Pricing</h1>
    <p style="text-align:center;margin-top:6px;">
      Cognitive AI Officer by Joshi Enterprises
    </p>

    <!-- Your original simple table styling preserved -->
    <table style="width:100%;border-collapse:collapse;margin-top:12px;">
      <thead>
        <tr>
          <th style="border:1px solid #eee;padding:8px;">Plan</th>
          <th style="border:1px solid #eee;padding:8px;">Price</th>
          <th style="border:1px solid #eee;padding:8px;">Features</th>
          <th style="border:1px solid #eee;padding:8px;">Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- DEMO -->
        <tr>
          <td style="border:1px solid #eee;padding:8px;">Demo</td>
          <td style="border:1px solid #eee;padding:8px;">
            <span id="price-demo">₹0 / $0</span>
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            Dashboard access<br>
            Query + doc upload (daily cap)<br>
            Sample datasets<br>
            Watermarked output
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            <a id="cta-demo" href="#" style="text-decoration:none;">Start Free</a>
          </td>
        </tr>

        <!-- PRO -->
        <tr>
          <td style="border:1px solid #eee;padding:8px;">Pro</td>
          <td style="border:1px solid #eee;padding:8px;">
            <span id="price-pro">—</span>
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            Dashboard access<br>
            Query + doc upload (higher daily caps)<br>
            Priority analysis queue
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            <a id="cta-pro" href="#" style="text-decoration:none;">Get Pro</a>
          </td>
        </tr>

        <!-- PRO+ -->
        <tr>
          <td style="border:1px solid #eee;padding:8px;">Pro+</td>
          <td style="border:1px solid #eee;padding:8px;">
            <span id="price-proplus">—</span>
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            Everything in Pro<br>
            <b>Chat</b> with CAIO + Scenario simulation<br>
            Export to PDF
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            <a id="cta-proplus" href="#" style="text-decoration:none;">Upgrade to Pro+</a>
          </td>
        </tr>

        <!-- PREMIUM -->
        <tr>
          <td style="border:1px solid #eee;padding:8px;">Premium</td>
          <td style="border:1px solid #eee;padding:8px;">
            <span id="price-premium">Custom</span>
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            Everything in Pro+<br>
            Highest limits &amp; advanced CXO brains<br>
            Dedicated support, SSO, API, compliance
          </td>
          <td style="border:1px solid #eee;padding:8px;">
            <a id="cta-premium" href="contact.html" style="text-decoration:none;">Contact Sales</a>
          </td>
        </tr>
      </tbody>
    </table>

    <p style="text-align:center;margin-top:10px;font-size:.95em;color:#6b7280;">
      Demo &amp; Pro: Dashboard analysis with daily caps. Pro+ &amp; Premium: Chat + Doc upload with higher limits.
    </p>

    <p style="text-align:center;margin-top:14px;">
      <a href="index.html">← Back to Home</a>
    </p>

    <footer style="margin-top:18px;text-align:center;font-size:12px;color:#6b7280">
      <a href="terms.html">Terms</a> |
      <a href="privacy.html">Privacy</a> |
      <a href="refund.html">Refunds</a>
      <br>
      <span>© <span id="y"></span> CAIO by Joshi Enterprises. All rights reserved.</span>
    </footer>
  </div>

  <script>
    // ====== Connectivity without changing layout ======
    // Derive app/api subdomains automatically from current host:
    // e.g., caio.live -> app.caio.live / api.caio.live
    (function () {
      var host = (location.hostname || "").replace(/^www\./, "");
      var parts = host.split(".");
      var root = parts.length >= 2 ? parts.slice(-2).join(".") : host;

      // If you prefer hardcoding, uncomment and set these:
      // var APP_BASE = "https://app.caio.live";
      // var API_BASE = "https://api.caio.live";

      var APP_BASE = (window.CAIO_APP_BASE || ("https://app." + root));
      var API_BASE = (window.CAIO_API_BASE || ("https://api." + root));

      // Wire CTAs
      document.getElementById("cta-demo").href     = APP_BASE + "/signup?plan=demo";
      document.getElementById("cta-pro").href      = APP_BASE + "/signup?plan=pro";
      document.getElementById("cta-proplus").href  = APP_BASE + "/payments?plan=proplus";
      // Premium stays contact for now (or wire to enterprise lead form)

      // Helper: choose currency label by locale (INR for India, else USD)
      function preferINR() {
        try {
          var lang = (navigator.language || "").toLowerCase();
          // Quick heuristic: if user's locale or timezone suggests India, prefer INR
          if (lang.includes("en-in") || lang.includes("-in")) return true;
          var tz = Intl.DateTimeFormat().resolvedOptions().timeZone || "";
          if (tz && /kolkata|calcutta|india/i.test(tz)) return true;
        } catch (e) {}
        return false;
      }
      var useINR = preferINR();

      // Flexible price extractor (supports multiple backend shapes)
      function extractPrice(data, planKey) {
        // Shape A: { plans: [{id:"proplus", price_display:"₹2,999 / mo"}] }
        if (data && Array.isArray(data.plans)) {
          var p = data.plans.find(function (x) { return (x.id || x.plan) === planKey; });
          if (p && (p.price_display || p.display)) return p.price_display || p.display;
        }
        // Shape B: { pricing: { proplus: { display:"₹2,999 / mo", amount_inr:2999, amount_usd:39 } } }
        if (data && data.pricing && data.pricing[planKey]) {
          var obj = data.pricing[planKey];
          if (obj.display) return obj.display;
          if (useINR && obj.amount_inr != null) return "₹" + obj.amount_inr + " / mo";
          if (obj.amount_usd != null) return "$" + obj.amount_usd + " / mo";
        }
        // Shape C: flat: { proplus_inr:2999, proplus_usd:39 }
        if (data) {
          if (useINR && data[planKey + "_inr"] != null) return "₹" + data[planKey + "_inr"] + " / mo";
          if (data[planKey + "_usd"] != null) return "$" + data[planKey + "_usd"] + " / mo";
        }
        return null;
      }

      // Try endpoints in order until one succeeds
      var endpoints = [
        API_BASE + "/public-config",
        API_BASE + "/pricing",
        APP_BASE + "/api/public-config"
      ];

      function setPrice(id, val) {
        var el = document.getElementById(id);
        if (el && val) el.textContent = val;
      }

      (async function hydrate() {
        for (var i = 0; i < endpoints.length; i++) {
          try {
            var res = await fetch(endpoints[i], { credentials: "omit" });
            if (!res.ok) continue;
            var data = await res.json();

            // Plans: demo (free), pro, proplus, premium (custom)
            setPrice("price-demo",    extractPrice(data, "demo")    || "₹0 / $0");
            setPrice("price-pro",     extractPrice(data, "pro")     || (useINR ? "₹— / mo" : "$— / mo"));
            setPrice("price-proplus", extractPrice(data, "proplus") || (useINR ? "₹— / mo" : "$— / mo"));
            setPrice("price-premium", extractPrice(data, "premium") || "Custom");
            return; // stop on first success
          } catch (e) {
            // try next endpoint
          }
        }
        // If all endpoints fail, we keep placeholders (no UI break)
      })();

      // Footer year
      document.getElementById("y").textContent = new Date().getFullYear();
    })();
  </script>
  <script src="assets/caio.js?v=1"></script>
</body>
</html>
